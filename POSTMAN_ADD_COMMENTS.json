{
  "info": {
    "name": "Add Product Comments for AI Summary Testing",
    "description": "Registers buyers, logs them in, and adds comments to products",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {"key": "baseUrl", "value": "http://localhost:4000/api"},
    {"key": "buyer1Token", "value": ""},
    {"key": "buyer2Token", "value": ""},
    {"key": "buyer3Token", "value": ""},
    {"key": "productId1", "value": "", "description": "iPhone 15 Pro"},
    {"key": "productId2", "value": "", "description": "MacBook Pro"},
    {"key": "productId3", "value": "", "description": "AirPods Pro"},
    {"key": "productId4", "value": "", "description": "Samsung Galaxy"}
  ],
  "item": [
    {
      "name": "1. Register & Login Buyers",
      "item": [
        {"name": "Register Buyer 1", "event": [{"listen": "prerequest", "script": {"exec": ["pm.collectionVariables.set('email1', 'alice' + Date.now() + '@test.com');"]}}], "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\"name\": \"Alice Buyer {{$randomInt}}\",\"email\": \"{{email1}}\",\"password\": \"pass123\",\"role\": \"buyer\"}"}, "url": {"raw": "{{baseUrl}}/auth/register", "host": ["{{baseUrl}}"], "path": ["auth", "register"]}}},
        {"name": "Login Buyer 1", "event": [{"listen": "test", "script": {"exec": ["if (pm.response.code === 200) {", "pm.collectionVariables.set('buyer1Token', pm.response.json().token);", "}"]}}], "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\"email\": \"{{email1}}\",\"password\": \"pass123\"}"}, "url": {"raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth", "login"]}}},
        {"name": "Register Buyer 2", "event": [{"listen": "prerequest", "script": {"exec": ["pm.collectionVariables.set('email2', 'bob' + (Date.now() + 1) + '@test.com');"]}}], "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\"name\": \"Bob Buyer {{$randomInt}}\",\"email\": \"{{email2}}\",\"password\": \"pass123\",\"role\": \"buyer\"}"}, "url": {"raw": "{{baseUrl}}/auth/register", "host": ["{{baseUrl}}"], "path": ["auth", "register"]}}},
        {"name": "Login Buyer 2", "event": [{"listen": "test", "script": {"exec": ["if (pm.response.code === 200) {", "pm.collectionVariables.set('buyer2Token', pm.response.json().token);", "}"]}}], "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\"email\": \"{{email2}}\",\"password\": \"pass123\"}"}, "url": {"raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth", "login"]}}},
        {"name": "Register Buyer 3", "event": [{"listen": "prerequest", "script": {"exec": ["pm.collectionVariables.set('email3', 'carol' + (Date.now() + 2) + '@test.com');"]}}], "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\"name\": \"Carol Buyer {{$randomInt}}\",\"email\": \"{{email3}}\",\"password\": \"pass123\",\"role\": \"buyer\"}"}, "url": {"raw": "{{baseUrl}}/auth/register", "host": ["{{baseUrl}}"], "path": ["auth", "register"]}}},
        {"name": "Login Buyer 3", "event": [{"listen": "test", "script": {"exec": ["if (pm.response.code === 200) {", "pm.collectionVariables.set('buyer3Token', pm.response.json().token);", "}"]}}], "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\"email\": \"{{email3}}\",\"password\": \"pass123\"}"}, "url": {"raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth", "login"]}}}
      ]
    },
    {
      "name": "2. Product 1 Comments",
      "item": [
        {"name": "Buyer 1 - Excellent", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{buyer1Token}}"}], "body": {"mode": "raw", "raw": "{\"rating\": 5, \"comment\": \"Amazing product! Exceeded all expectations. Build quality is exceptional and performance is outstanding.\"}"}, "url": {"raw": "{{baseUrl}}/buyer/products/{{productId1}}/rate", "host": ["{{baseUrl}}"], "path": ["buyer", "products", "{{productId1}}", "rate"]}}},
        {"name": "Buyer 2 - Good", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{buyer2Token}}"}], "body": {"mode": "raw", "raw": "{\"rating\": 4, \"comment\": \"Very good product. Worth the price. Some minor issues but overall satisfied with purchase.\"}"}, "url": {"raw": "{{baseUrl}}/buyer/products/{{productId1}}/rate", "host": ["{{baseUrl}}"], "path": ["buyer", "products", "{{productId1}}", "rate"]}}},
        {"name": "Buyer 3 - Perfect", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{buyer3Token}}"}], "body": {"mode": "raw", "raw": "{\"rating\": 5, \"comment\": \"Perfect! Fast delivery and product works flawlessly. Highly recommend to everyone!\"}"}, "url": {"raw": "{{baseUrl}}/buyer/products/{{productId1}}/rate", "host": ["{{baseUrl}}"], "path": ["buyer", "products", "{{productId1}}", "rate"]}}}
      ]
    },
    {
      "name": "3. Product 2 Comments",
      "item": [
        {"name": "Buyer 1 - Great", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{buyer1Token}}"}], "body": {"mode": "raw", "raw": "{\"rating\": 5, \"comment\": \"Best purchase I've made! Quality is top-notch and exceeded expectations in every way.\"}"}, "url": {"raw": "{{baseUrl}}/buyer/products/{{productId2}}/rate", "host": ["{{baseUrl}}"], "path": ["buyer", "products", "{{productId2}}", "rate"]}}},
        {"name": "Buyer 2 - Solid", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{buyer2Token}}"}], "body": {"mode": "raw", "raw": "{\"rating\": 4, \"comment\": \"Solid product with good build. Does exactly what it promises. Happy with this purchase.\"}"}, "url": {"raw": "{{baseUrl}}/buyer/products/{{productId2}}/rate", "host": ["{{baseUrl}}"], "path": ["buyer", "products", "{{productId2}}", "rate"]}}},
        {"name": "Buyer 3 - Love it", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{buyer3Token}}"}], "body": {"mode": "raw", "raw": "{\"rating\": 5, \"comment\": \"Love it! Performance is amazing and the quality speaks for itself. Worth every penny!\"}"}, "url": {"raw": "{{baseUrl}}/buyer/products/{{productId2}}/rate", "host": ["{{baseUrl}}"], "path": ["buyer", "products", "{{productId2}}", "rate"]}}}
      ]
    },
    {
      "name": "4. Product 3 Comments",
      "item": [
        {"name": "Buyer 1 - Impressed", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{buyer1Token}}"}], "body": {"mode": "raw", "raw": "{\"rating\": 5, \"comment\": \"Thoroughly impressed! The attention to detail is remarkable. Couldn't be happier with this!\"}"}, "url": {"raw": "{{baseUrl}}/buyer/products/{{productId3}}/rate", "host": ["{{baseUrl}}"], "path": ["buyer", "products", "{{productId3}}", "rate"]}}},
        {"name": "Buyer 2 - Nice", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{buyer2Token}}"}], "body": {"mode": "raw", "raw": "{\"rating\": 4, \"comment\": \"Nice product overall. Good value for money. A few areas for improvement but generally satisfied.\"}"}, "url": {"raw": "{{baseUrl}}/buyer/products/{{productId3}}/rate", "host": ["{{baseUrl}}"], "path": ["buyer", "products", "{{productId3}}", "rate"]}}},
        {"name": "Buyer 3 - Fantastic", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{buyer3Token}}"}], "body": {"mode": "raw", "raw": "{\"rating\": 5, \"comment\": \"Fantastic product! Seller delivered quickly and item is exactly as described. Five stars all around!\"}"}, "url": {"raw": "{{baseUrl}}/buyer/products/{{productId3}}/rate", "host": ["{{baseUrl}}"], "path": ["buyer", "products", "{{productId3}}", "rate"]}}}
      ]
    },
    {
      "name": "5. Test AI Summaries",
      "item": [
        {"name": "Summary - Product 1", "request": {"method": "GET", "header": [], "url": {"raw": "{{baseUrl}}/public/products/{{productId1}}/summary", "host": ["{{baseUrl}}"], "path": ["public", "products", "{{productId1}}", "summary"]}}},
        {"name": "Summary - Product 2", "request": {"method": "GET", "header": [], "url": {"raw": "{{baseUrl}}/public/products/{{productId2}}/summary", "host": ["{{baseUrl}}"], "path": ["public", "products", "{{productId2}}", "summary"]}}},
        {"name": "Summary - Product 3", "request": {"method": "GET", "header": [], "url": {"raw": "{{baseUrl}}/public/products/{{productId3}}/summary", "host": ["{{baseUrl}}"], "path": ["public", "products", "{{productId3}}", "summary"]}}}
      ]
    }
  ]
}
